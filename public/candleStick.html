<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>training</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jcanvas/21.0.1/min/jcanvas.min.js"></script>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/jquery.jqplot.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.barRenderer.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.dateAxisRenderer.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.ohlcRenderer.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.highlighter.min.js"></script>

    <link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/jquery.jqplot.css" />

    <!--script src="http://cdnjs.cloudflare.com/ajax/libs/canvasjs/1.7.0/canvasjs.min.js"></script-->
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>


    <script type="text/javascript">

    window.onload = function () {

    var chart = new CanvasJS.Chart("chartContainer", {
    	animationEnabled: true,
    	theme: "dark1", // "light1", "light2", "dark1", "dark2"
    	exportEnabled: true,
    	title:{
    		text: "YKC 価格状況"
    	},
    	axisX: {
    		valueFormatString: "MMM"
    	},
    	axisY: {
    		includeZero:false,
    		prefix: "¥",
    		title: "価格(JPY)"
    	},
    	toolTip: {
    		shared: true
    	},
    	legend: {
    		cursor: "pointer",
    		itemclick: toogleDataSeries
    	},
    	data: [{
    		type: "candlestick",
    		showInLegend: true,
    		name: "過去の値動き(確定)",
    		yValueFormatString: "¥###0.00",
    		xValueFormatString: "MMMM YY",
    		dataPoints: [
    			{ x: new Date(2016, 00, 01), y: [34.080002, 36.060001, 33.410000, 36.060001] },
    			{ x: new Date(2016, 01, 01), y: [36.040001, 37.500000, 35.790001, 36.950001] },
    			{ x: new Date(2016, 02, 01), y: [37.099998, 39.720001, 37.060001, 39.169998] },
    			{ x: new Date(2016, 03, 01), y: [38.669998, 39.360001, 37.730000, 38.820000] },
    			{ x: new Date(2016, 04, 01), y: [38.869999, 39.669998, 37.770000, 39.150002] },
    			{ x: new Date(2016, 05, 01), y: [39.099998, 43.419998, 38.580002, 43.209999] },
    			{ x: new Date(2016, 06, 01), y: [43.209999, 43.889999, 41.700001, 43.290001] },
    			{ x: new Date(2016, 07, 01), y: [43.250000, 43.500000, 40.549999, 40.880001] },
    			{ x: new Date(2016, 08, 01), y: [40.849998, 41.700001, 39.549999, 40.610001] },
    			{ x: new Date(2016, 09, 01), y: [40.619999, 41.040001, 36.270000, 36.790001] },
    			{ x: new Date(2016, 10, 01), y: [36.970001, 39.669998, 36.099998, 38.630001] },
    			{ x: new Date(2016, 11, 01), y: [38.630001, 42.840000, 38.160000, 40.380001] }
    		]
    	},
    	{
    		type: "candlestick",
    		showInLegend: true,
    		name: "今後の値動き(予測)",
    		yValueFormatString: "¥###0.00",
    		dataPoints: [
    			{ x: new Date(2017, 00, 01), y: [45.669998, 49.990002, 43.790001, 49.970001] },
    			{ x: new Date(2017, 01, 01), y: [49.939999, 51.380001, 49.270000, 50.730000] },
    			{ x: new Date(2017, 02, 01), y: [50.990002, 54.369999, 50.980000, 54.080002] },
    			{ x: new Date(2017, 03, 01), y: [53.320000, 54.490002, 49.470001, 50.939999] },
    			{ x: new Date(2017, 04, 01), y: [51.220001, 51.700001, 49.049999, 50.900002] },
    			{ x: new Date(2017, 05, 01), y: [50.869999, 55.919998, 50.119999, 55.840000] },
    			{ x: new Date(2017, 06, 01), y: [55.849998, 56.950001, 54.439999, 55.410000] },
    			{ x: new Date(2017, 07, 01), y: [55.580002, 55.820000, 51.900002, 52.330002] },
    			{ x: new Date(2017, 08, 01), y: [52.139999, 53.880001, 51.020000, 51.980000] },
    			{ x: new Date(2017, 09, 01), y: [51.840000, 52.139999, 47.580002, 48.099998] },
    			{ x: new Date(2017, 10, 01), y: [48.320000, 51.200001, 46.009998, 49.900002] },
    			{ x: new Date(2017, 11, 01), y: [49.799999, 53.900002, 49.310001, 53.380001] }
    		]
    	}]
    });
    chart.render();

    function toogleDataSeries(e) {
    	if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
    		e.dataSeries.visible = false;
    	} else {
    		e.dataSeries.visible = true;
    	}
    	e.chart.render();
    }

    }

    </script>

  </head>

  <body>
    <h1>candlestick sample</h1>

    <div id="chartContainer" style="height: 300px; width: 100%;"></div><br/><br/>

    <div id="jqPlot-sample" style="height: 300px; width: 800px;"></div>
    <div id="jqPlot-sample2" style="height: 300px; width: 500px;"></div>

  </body>

</html>


<script type="text/javascript">

  /* データ形式
    [
        [ '日時', 始値, 高値, 安値, 終値 ],
        [ '日時', 始値, 高値, 安値, 終値 ],
        ・・・
    ]
  */
  ohlc1 = [
    ['06/15/2009 16:00:00', 136.01, 139.5, 134.53, 139.48],
    ['06/08/2009 16:00:00', 143.82, 144.56, 136.04, 136.97],
    ['06/01/2009 16:00:00', 136.47, 146.4, 136, 144.67],
    ['05/26/2009 16:00:00', 124.76, 135.9, 124.55, 135.81],
    ['05/18/2009 16:00:00', 123.73, 129.31, 121.57, 122.5],
    ['05/11/2009 16:00:00', 127.37, 130.96, 119.38, 122.42],
    ['05/04/2009 16:00:00', 128.24, 133.5, 126.26, 129.19],
    ['04/27/2009 16:00:00', 122.9, 127.95, 122.66, 127.24],
    ['04/20/2009 16:00:00', 121.73, 127.2, 118.6, 123.9],
    ['04/13/2009 16:00:00', 120.01, 124.25, 115.76, 123.42],
    ['04/06/2009 16:00:00', 114.94, 120, 113.28, 119.57],
    ['03/30/2009 16:00:00', 104.51, 116.13, 102.61, 115.99],
    ['03/23/2009 16:00:00', 102.71, 109.98, 101.75, 106.85],
    ['03/16/2009 16:00:00', 96.53, 103.48, 94.18, 101.59],
    ['03/09/2009 16:00:00', 84.18, 97.2, 82.57, 95.93],
    ['03/02/2009 16:00:00', 88.12, 92.77, 82.33, 85.3],
    ['02/23/2009 16:00:00', 91.65, 92.92, 86.51, 89.31],
    ['02/17/2009 16:00:00', 96.87, 97.04, 89, 91.2],
    ['02/09/2009 16:00:00', 100, 103, 95.77, 99.16],
    ['02/02/2009 16:00:00', 89.1, 100, 88.9, 99.72],
    ['01/26/2009 16:00:00', 88.86, 95, 88.3, 90.13],
    ['01/20/2009 16:00:00', 81.93, 90, 78.2, 88.36],
    ['01/12/2009 16:00:00', 90.46, 90.99, 80.05, 82.33],
    ['01/05/2009 16:00:00', 93.17, 97.17, 90.04, 90.58],
    ['12/29/2008 16:00:00', 86.52, 91.04, 84.72, 90.75],
    ['12/22/2008 16:00:00', 90.02, 90.03, 84.55, 85.81],
    ['12/15/2008 16:00:00', 95.99, 96.48, 88.02, 90],
    ['12/08/2008 16:00:00', 97.28, 103.6, 92.53, 98.27],
    ['12/01/2008 16:00:00', 91.3, 96.23, 86.5, 94],
    ['11/24/2008 16:00:00', 85.21, 95.25, 84.84, 92.67],
    ['11/17/2008 16:00:00', 88.48, 91.58, 79.14, 82.58],
    ['11/10/2008 16:00:00', 100.17, 100.4, 86.02, 90.24],
    ['11/03/2008 16:00:00', 105.93, 111.79, 95.72, 98.24],
    ['10/27/2008 16:00:00', 95.07, 112.19, 91.86, 107.59],
    ['10/20/2008 16:00:00', 99.78, 101.25, 90.11, 96.38],
    ['10/13/2008 16:00:00', 104.55, 116.4, 85.89, 97.4],
    ['10/06/2008 16:00:00', 91.96, 101.5, 85, 96.8],
    ['09/29/2008 16:00:00', 119.62, 119.68, 94.65, 97.07],
    ['09/22/2008 16:00:00', 139.94, 140.25, 123, 128.24],
    ['09/15/2008 16:00:00', 142.03, 147.69, 120.68, 140.91]
  ];

  ohlc2 = [
    ['06/15/2008 16:00:00', 136.01, 139.5, 134.53, 139.48],
    ['06/08/2008 16:00:00', 143.82, 144.56, 136.04, 136.97],
    ['06/01/2008 16:00:00', 136.47, 146.4, 136, 144.67],
    ['05/26/2008 16:00:00', 124.76, 135.9, 124.55, 135.81],
    ['05/18/2008 16:00:00', 123.73, 129.31, 121.57, 122.5],
    ['05/11/2008 16:00:00', 127.37, 130.96, 119.38, 122.42],
    ['05/04/2008 16:00:00', 128.24, 133.5, 126.26, 129.19],
    ['04/27/2008 16:00:00', 122.9, 127.95, 122.66, 127.24],
    ['04/20/2008 16:00:00', 121.73, 127.2, 118.6, 123.9],
    ['04/13/2008 16:00:00', 120.01, 124.25, 115.76, 123.42],
    ['04/06/2008 16:00:00', 114.94, 120, 113.28, 119.57],
    ['03/30/2008 16:00:00', 104.51, 116.13, 102.61, 115.99],
    ['03/23/2008 16:00:00', 102.71, 109.98, 101.75, 106.85],
    ['03/16/2008 16:00:00', 96.53, 103.48, 94.18, 101.59],
    ['03/09/2008 16:00:00', 84.18, 97.2, 82.57, 95.93],
    ['03/02/2008 16:00:00', 88.12, 92.77, 82.33, 85.3],
    ['02/23/2008 16:00:00', 91.65, 92.92, 86.51, 89.31],
    ['02/17/2008 16:00:00', 96.87, 97.04, 89, 91.2],
    ['02/09/2008 16:00:00', 100, 103, 95.77, 99.16],
    ['02/02/2008 16:00:00', 89.1, 100, 88.9, 99.72],
    ['01/26/2008 16:00:00', 88.86, 95, 88.3, 90.13],
    ['01/20/2008 16:00:00', 81.93, 90, 78.2, 88.36],
  ];

  $(document).ready(function(){
    var plot2 = $.jqplot('jqPlot-sample',[ohlc1,ohlc2],{
      seriesDefaults:{yaxis:'y2axis'},
      axes: {
        xaxis: {
          renderer:$.jqplot.DateAxisRenderer,
          tickOptions:{formatString:'%b %e'},
          min: "01-01-2008",
          max: "07-22-2009",
          tickInterval: "6 weeks"
        },
        y2axis: {
          tickOptions:{formatString:'$%d'}
        }
      },
      // To make a candle stick chart, set the "candleStick" option to true.
      series: [
        {
          color:'#3399EE',
          renderer:$.jqplot.OHLCRenderer,
          rendererOptions:{ candleStick:true }
        }
      ],
      highlighter: {
        show: true,
        showMarker:false,
        tooltipAxes: 'xy',
        yvalues: 4,
        formatString:'<table class="jqplot-highlighter"> \
        <tr><td>date:</td><td>%s</td></tr> \
        <tr><td>open:</td><td>%s</td></tr> \
        <tr><td>hi:</td><td>%s</td></tr> \
        <tr><td>low:</td><td>%s</td></tr> \
        <tr><td>close:</td><td>%s</td></tr></table>'
      }
    });

  });

jQuery( function() {
ohlc= [
    [ '2012-01-01 0:00AM', 62, 70, 57, 68 ],
    [ '2012-02-01 0:00AM', 70, 83, 68, 76 ],
    [ '2012-03-01 0:00AM', 75, 96, 72, 94 ],
    [ '2012-04-01 0:00AM', 93, 95, 72, 84 ],
    [ '2012-05-01 0:00AM', 85, 86, 67, 71 ],
    [ '2012-06-01 0:00AM', 75, 88, 75, 82 ]
]
jQuery . jqplot(
    'jqPlot-sample2',
    [
        ohlc
    ],
    {
        seriesDefaults: {
            renderer: jQuery . jqplot . OHLCRenderer,
            rendererOptions: {
                candleStick: true
            }
        },
        axes:{
            xaxis:{
                renderer: jQuery . jqplot . DateAxisRenderer,
                min: '2011-12-01 0:00AM',
                max: '2012-08-01 0:00AM',
                tickInterval: '1 months',
                tickOptions:{
                    formatString: '%B'
                },
            }
        },
      }
  );
});

</script>
